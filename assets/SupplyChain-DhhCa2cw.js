import{j as e}from"./index-CLbx3UkF.js";import{S as i}from"./styled-C20Qc1Rl.js";const r=()=>e.jsxs(i.Page,{children:[e.jsx(i.Title,{children:"Software Supply Chain Security"}),e.jsxs(i.Lead,{children:[e.jsx("b",{children:"Software supply chain"})," security protects everything that goes into building and running your app: third-party packages, transitive dependencies, registries, build tools, CI/CD pipelines, secrets, and the way you publish and deploy. The goal is ",e.jsx("b",{children:"integrity"})," (no tampering), ",e.jsx("b",{children:"authenticity"})," (trusted sources), and ",e.jsx("b",{children:"reproducibility"})," (same inputs → same outputs)."]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"What is the Supply Chain? Why it matters"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Supply chain:"})," the network of ",e.jsx("em",{children:"code, tools, and infrastructure"})," used to develop, build, test, and deliver your app."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Risk:"})," one weak link (a dependency, script, or CI step) can compromise credentials, inject malware, or ship a backdoored build."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Scope:"})," includes ",e.jsx(i.InlineCode,{children:"package.json"}),", lockfiles, registries, build scripts, CI/CD, artifacts, container images, and deploy steps."]})]})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"Common Attack Paths (with definitions)"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Typosquatting:"})," publishing a package with a misspelled name (e.g., ",e.jsx("code",{children:"react-don"}),") hoping someone installs it by mistake."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Dependency confusion:"})," attacker publishes a public package with the ",e.jsx("em",{children:"same name"})," as an internal one so builds pull the attacker's version."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Malicious maintainer / hijacked account:"})," a popular package gets a bad release after account takeover or maintainer turns rogue."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Postinstall scripts:"})," lifecycle scripts (e.g., ",e.jsx("code",{children:"postinstall"}),") run arbitrary code on install to exfiltrate secrets."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Unpinned CI actions/tools:"})," building with moving tags (",e.jsx("code",{children:"@v3"}),") instead of immutable SHAs can execute changed code later."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Registry injection / mirror risk:"})," using untrusted registries or mirrors can deliver altered tarballs."]})]})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"Pin Your Inputs: Versions, Ranges, and Lockfiles"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Semantic Versioning (SemVer):"})," ",e.jsx("code",{children:"MAJOR.MINOR.PATCH"})," (breaking / features / fixes)."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Caret (^1.2.3):"})," allows MINOR+PATCH updates (",e.jsx("code",{children:"<2.0.0"}),"). ",e.jsx("b",{children:"Tilde (~1.2.3):"})," allows PATCH (",e.jsx("code",{children:"<1.3.0"}),")."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Exact pin:"})," ",e.jsx("code",{children:'"1.2.3"'})," installs only that version. Use lockfiles to freeze transitive deps."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Lockfile:"})," ",e.jsx("code",{children:"package-lock.json"}),", ",e.jsx("code",{children:"pnpm-lock.yaml"}),", or ",e.jsx("code",{children:"yarn.lock"})," records the exact resolved versions + integrity hashes for reproducible builds."]})]}),e.jsx(i.Pre,{children:`// package.json — safer pins for production apps
{
  "dependencies": {
    "react": "18.3.1",          // exact pin (example)
    "react-dom": "18.3.1"
  },
  "devDependencies": {
    "vite": "5.4.8"
  },
  "overrides": {                // npm >=8 / pnpm: force a safe transitive version if needed
    "left-pad": "1.3.0"
  },
  "packageManager": "pnpm@9.10.0" // pin your package manager via Corepack
}`}),e.jsxs(i.Small,{children:["Use ",e.jsx("b",{children:"exact versions"})," for prod; manage updates via scheduled PRs (Dependabot/Renovate) after review."]})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"Install-Time Safety (Local & CI)"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Use the lockfile:"})," ",e.jsx(i.InlineCode,{children:"npm ci"})," / ",e.jsx(i.InlineCode,{children:"pnpm install --frozen-lockfile"})," / ",e.jsx(i.InlineCode,{children:"yarn install --immutable"}),"."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Block lifecycle scripts when possible:"})," ",e.jsx(i.InlineCode,{children:"--ignore-scripts"})," in CI to stop ",e.jsx("code",{children:"postinstall"})," from running."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Scope registries:"})," pin your org scope to a trusted registry in ",e.jsx("code",{children:".npmrc"}),"; avoid random mirrors."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Review new packages:"})," check weekly downloads, maintainer activity, and whether source matches the published tarball (",e.jsx(i.InlineCode,{children:"npm pack --dry-run"}),")."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Audit:"})," run dependency audits and fix/override intentionally with review notes."]})]}),e.jsx(i.Pre,{children:`# Safer installs in CI
npm ci --ignore-scripts
# or
pnpm install --frozen-lockfile --ignore-scripts
# Audit
npm audit --production
pnpm audit --prod`}),e.jsx(i.Pre,{children:`# .npmrc — examples
audit=true
fund=false
@your-scope:registry=https://npm.pkg.github.com
# Optional: raise the bar
audit-level=moderate`})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"CI/CD Guardrails"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Pin actions/tools:"})," reference GitHub Actions by ",e.jsx("em",{children:"commit SHA"})," (not just a tag like ",e.jsx("code",{children:"@v4"}),")."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Least privilege secrets:"})," short-lived, environment-scoped tokens; prefer OIDC-based tokens over long-lived PATs."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Protected environments:"})," required reviews for release, branch protection, and forced checks."]}),e.jsxs("li",{children:[e.jsx("b",{children:"SBOM:"})," generate a Software Bill of Materials (SPDX/CycloneDX) and store it with artifacts."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Artifact integrity:"})," sign artifacts (e.g., container images) and verify before deploy."]})]}),e.jsx(i.Pre,{children:`# .github/workflows/build.yml (snippet)
jobs:
  build:
    steps:
      - name: Checkout
        uses: actions/checkout@<commit-sha>
      - name: Setup Node
        uses: actions/setup-node@<commit-sha>
        with:
          node-version: 20
          cache: 'pnpm'
      - run: corepack enable
      - run: pnpm install --frozen-lockfile --ignore-scripts
      - run: pnpm build
      # - run: sbom-tool ... (emit CycloneDX/SPDX)`})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"Registry & Publishing Hygiene"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"2FA for publishers:"})," enable two-factor auth on accounts with publish rights."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Code owners & reviews:"})," require reviews on dependency bumps and release scripts."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Verify the tarball:"})," run ",e.jsx(i.InlineCode,{children:"npm pack --dry-run"})," to see what will ship; ensure no secrets or build junk."]}),e.jsxs("li",{children:[e.jsx("b",{children:"No secret-using scripts on publish:"})," avoid ",e.jsx("code",{children:"prepublishOnly"}),"/",e.jsx("code",{children:"postpublish"})," that hit internal services."]}),e.jsxs("li",{children:[e.jsx("b",{children:"License & provenance:"})," include a license and repository metadata for traceability."]})]}),e.jsx(i.Pre,{children:`// package.json — safe publishing hints
{
  "files": ["dist/", "README.md", "LICENSE"],
  "scripts": {
    "build": "vite build",
    "prepare": "husky install" // keep it local; do not require secrets
  }
}`})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"Runtime Precautions (Frontend)"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsxs("b",{children:["Avoid dynamic ",e.jsx("code",{children:"eval()"})," / Function constructor:"]})," they bypass static analysis and invite injection."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Static imports preferred:"})," if you must dynamic-import, validate the specifier (don't build it from user input)."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Content Security Policy (CSP):"})," helps restrict where scripts can load from (ties into XSS defense)."]})]})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"Do & Don't"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Do"})," pin dependencies and commit the lockfile."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Do"})," run ",e.jsx(i.InlineCode,{children:"npm ci"}),"/",e.jsx(i.InlineCode,{children:"pnpm --frozen-lockfile"})," in CI."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Do"})," block ",e.jsx("code",{children:"postinstall"})," in CI unless absolutely required."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Do"})," pin CI actions to immutable SHAs and restrict secrets."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Don't"})," install from untrusted mirrors/registries."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Don't"})," accept wildcard ranges for prod (e.g., ",e.jsx("code",{children:'"^"'})," everywhere) without review."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Don't"})," publish packages without 2FA and a review trail."]})]})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"Quick Recipes"}),e.jsx(i.Pre,{children:`# Lock down versions and manager
corepack enable
# package.json has: "packageManager": "pnpm@9.10.0"

# CI install (deterministic, no scripts)
pnpm install --frozen-lockfile --ignore-scripts

# Approve dependency updates via PR bots
# (Dependabot/Renovate) with CODEOWNERS review

# Verify publish contents
npm pack --dry-run`})]}),e.jsxs(i.Section,{children:[e.jsx(i.H2,{children:"Glossary"}),e.jsxs(i.List,{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Dependency:"})," a package you declare in ",e.jsx("code",{children:"dependencies/devDependencies"}),"."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Transitive dependency:"})," a dependency of your dependency (pulled indirectly)."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Lockfile:"})," file that freezes exact versions + integrity hashes for reproducible installs."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Integrity hash:"})," cryptographic checksum in the lockfile that ensures the tarball content matches what was resolved."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Lifecycle script:"})," npm/pnpm script that runs automatically on install/publish (e.g., ",e.jsx("code",{children:"postinstall"}),")."]}),e.jsxs("li",{children:[e.jsx("b",{children:"SBOM:"})," Software Bill of Materials—machine-readable list of components in your build (SPDX/CycloneDX)."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Provenance:"})," traceable evidence of how/where an artifact was built (who built it, from which source, with which tools)."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Least privilege:"})," give every token/role only the permissions it strictly needs."]})]})]}),e.jsx(i.Callout,{children:"Summary: lock down versions and package manager, use lockfile-based installs, review and audit new deps, restrict registries and lifecycle scripts, pin CI actions, protect secrets, generate SBOMs, and verify what you publish and deploy. Treat every step—from install to release—as a potential trust boundary."})]});export{r as default};
